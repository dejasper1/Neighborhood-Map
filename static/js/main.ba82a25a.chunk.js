(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(8),i=n.n(r),s=(n(14),n(1)),c=n(2),l=n(4),u=n(3),d=n(5),f=(n(16),function(e){return o.a.createElement("nav",null,o.a.createElement("svg",{"aria-label":"menu",tabIndex:"0",width:"30",height:"30",onClick:e.changeSideBar},o.a.createElement("path",{d:"M0,5 30,5",stroke:"#fff",strokeWidth:"5",strokeOpacity:"0.8"}),o.a.createElement("path",{d:"M0,14 30,14",stroke:"#fff",strokeWidth:"5",strokeOpacity:"0.8"}),o.a.createElement("path",{d:"M0,23 30,23",stroke:"#fff",strokeWidth:"5",strokeOpacity:"0.8"})),o.a.createElement("h3",null,"Trending Foursquare Venues"))}),p=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).triggerMarkerClick=function(e){n.props.markers.forEach(function(t){t.title===e&&window.google.maps.event.trigger(t,"click")})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(a.Fragment,null,o.a.createElement("div",{className:"side-bar"},o.a.createElement("span",{"aria-label":"close",tabIndex:"0",onClick:this.props.changeSideBar,className:"btn-close"},"\xd7"),o.a.createElement("input",{"aria-label":"filter venues",type:"text",value:this.props.query,onChange:function(t){e.props.updateQuery(t.target.value)},className:"input",placeholder:"Filter Venues..."}),o.a.createElement("ul",null,this.props.venues.map(function(t){return o.a.createElement("li",{tabIndex:"0",role:"link",className:"list-item",key:t.venue.id,onClick:function(){return e.triggerMarkerClick(t.venue.name)}},t.venue.name)}))))}}]),t}(a.Component);var m=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={venues:[],filteredVenues:[],markers:[],sidebar:!0,query:""},n.initMap=function(){var e=new window.google.maps.Map(document.getElementById("map"),{center:{lat:47.6062,lng:-122.332},zoom:10}),t=[],a=new window.google.maps.InfoWindow;n.state.venues.forEach(function(o){var r={lat:o.venue.location.lat,lng:o.venue.location.lng},i=new window.google.maps.Marker({position:r,map:e,animation:window.google.maps.Animation.DROP,title:o.venue.name}),s="\n      ".concat(o.venue.name,"\n      <br>\n      ").concat(o.venue.location.address?o.venue.location.address:"Address not found","\n        <br>\n        ").concat(o.venue.location.city,", ").concat(o.venue.location.state,"\n        ").concat(o.venue.location.postalCode);i.addListener("click",function(){a.setContent(s),a.open(e,i),null!==i.getAnimation()?i.setAnimation(null):(i.setAnimation(window.google.maps.Animation.BOUNCE),setTimeout(function(){i.setAnimation(null)},750))}),t.push(i),n.setState({markers:t})})},n.renderMap=function(){var e,t;window.initMap=n.initMap,e=window.document.getElementsByTagName("script")[0],(t=window.document.createElement("script")).src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyDbAz1XXxDoKSU2nZXec89rcHPxgkvVoiw","&callback=initMap"),t.async=!0,t.onerror=function(){alert("Error Google Maps API failed to load. \n"+this.src)},e.parentNode.insertBefore(t,e)},n.getVenues=function(){fetch("https://api.foursquare.com/v2/venues/explore?client_id=CQ05ERMDJAWYWLX0UNC3R5B1XB43G3C0YUMRWD0PVZQI4KAO&client_secret=3ZBI3S4FNTZH2R4YTPYUG4CIWIX05APWJVNLCRETVIHP4D33&v=20180323&limit=15&near=Seattle,WA&query=trending").then(function(e){return e.json()}).then(function(e){var t=e.response.groups[0].items;n.setState({venues:t,filteredVenues:t},n.renderMap())}).catch(function(e){console.log("Error: ",e),alert("Error: Foursquare API failed to load")})},n.changeSideBar=function(){n.setState({sidebar:!n.state.sidebar})},n.updateQuery=function(e){e?(n.setState({query:e}),n.filterVenues(e)):(n.setState({query:""}),n.setState({filteredVenues:n.state.venues}),n.state.markers.forEach(function(e){return e.setVisible(!0)}))},n.filterVenues=function(e){n.setState({filteredVenues:n.state.venues.filter(function(t){return t.venue.name.toLowerCase().includes(e.toLowerCase())})}),n.state.markers.forEach(function(t){t.title.toLowerCase().includes(e.toLowerCase())?t.setVisible(!0):t.setVisible(!1)})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"gm_authFailure",value:function(){window.alert("Google Maps authentication error!")}},{key:"componentDidMount",value:function(){window.gm_authFailure=this.gm_authFailure,this.getVenues()}},{key:"render",value:function(){return o.a.createElement(a.Fragment,null,o.a.createElement(f,{changeSideBar:this.changeSideBar}),this.state.sidebar&&o.a.createElement(p,{changeSideBar:this.changeSideBar,venues:this.state.filteredVenues,query:this.state.query,updateQuery:this.updateQuery,markers:this.state.markers}),o.a.createElement("main",null,o.a.createElement("div",{id:"map",className:"App"})))}}]),t}(a.Component),h=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function g(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available; please refresh."),t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(m,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Neighborhood-Map",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/Neighborhood-Map","/service-worker.js");h?(function(e,t){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):g(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):g(t,e)})}}()},9:function(e,t,n){e.exports=n(18)}},[[9,2,1]]]);
//# sourceMappingURL=main.ba82a25a.chunk.js.map